/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package br.com.nfe.testes;

import br.com.nfe.envinfe.TNFe;
import br.com.nfe.envinfe.TNFe.InfNFe.Det.Imposto.ICMS;
import br.com.nfe.envinfe.TNfeProc;
import br.com.nfe.util.TransformXmlUtil;
import java.util.List;

/**
 *
 * @author SYSTECH
 */
public class NFeProcHom {
    public static void main(String[] args) {
        String xml = "<nfeProc versao=\"4.00\" xmlns=\"http://www.portalfiscal.inf.br/nfe\"><NFe xmlns=\"http://www.portalfiscal.inf.br/nfe\"><infNFe versao=\"4.00\" Id=\"NFe43201005041647000185550010000661291884344087\"><ide><cUF>43</cUF><cNF>88434408</cNF><natOp>Venda</natOp><mod>55</mod><serie>1</serie><nNF>66129</nNF><dhEmi>2020-10-30T13:17:00-03:00</dhEmi><dhSaiEnt>2020-10-30T13:17:00-03:00</dhSaiEnt><tpNF>1</tpNF><idDest>2</idDest><cMunFG>4314407</cMunFG><tpImp>1</tpImp><tpEmis>1</tpEmis><cDV>7</cDV><tpAmb>1</tpAmb><finNFe>1</finNFe><indFinal>0</indFinal><indPres>9</indPres><procEmi>0</procEmi><verProc>1211320134HF01</verProc></ide><emit><CNPJ>05041647000185</CNPJ><xNome>COMPANYTEC AUTOMACAO E CONTROLE LTDA</xNome><xFant>COMPANYTEC AUTOMACAO E CONTROLE LTDA</xFant><enderEmit><xLgr>Avenida Ferreira Viana</xLgr><nro>1421</nro><xBairro>Areal</xBairro><cMun>4314407</cMun><xMun>Pelotas</xMun><UF>RS</UF><CEP>96085000</CEP><cPais>1058</cPais><xPais>Brasil</xPais><fone>5332848108</fone></enderEmit><IE>0930349563</IE><IM>5858208</IM><CNAE>2622100</CNAE><CRT>3</CRT></emit><dest><CNPJ>24254079000145</CNPJ><xNome>SYSTECH AUTOMACAO SERVICOS LTDA - ME</xNome><enderDest><xLgr>RUA JOSE BARBOSA</xLgr><nro>65</nro><xCpl>CASA</xCpl><xBairro>SAO JOSE</xBairro><cMun>2516904</cMun><xMun>Uirauna</xMun><UF>PB</UF><CEP>58915000</CEP><cPais>1058</cPais><xPais>Brasil</xPais><fone>8335341038</fone></enderDest><indIEDest>1</indIEDest><IE>162675496</IE><email>financeiro.systech@hotmail.com</email></dest><det nItem=\"1\"><prod><cProd>4830</cProd><cEAN>SEM GTIN</cEAN><xProd>Gabinete com Fonte de Alimentacao HRS1777-PST/BR</xProd><NCM>84733011</NCM><CEST>2103500</CEST><cBenef>RS052300</cBenef><CFOP>6916</CFOP><uCom>UN</uCom><qCom>1.0000</qCom><vUnCom>300.0000000000</vUnCom><vProd>300.00</vProd><cEANTrib>SEM GTIN</cEANTrib><uTrib>UN</uTrib><qTrib>1.0000</qTrib><vUnTrib>300.0000000000</vUnTrib><indTot>1</indTot></prod><imposto><vTotTrib>0.00</vTotTrib><ICMS><ICMS40><orig>0</orig><CST>50</CST></ICMS40></ICMS><IPI><cEnq>115</cEnq><IPINT><CST>55</CST></IPINT></IPI><PIS><PISNT><CST>08</CST></PISNT></PIS><COFINS><COFINSNT><CST>08</CST></COFINSNT></COFINS></imposto></det><total><ICMSTot><vBC>0.00</vBC><vICMS>0.00</vICMS><vICMSDeson>0.00</vICMSDeson><vFCP>0.00</vFCP><vBCST>0.00</vBCST><vST>0.00</vST><vFCPST>0.00</vFCPST><vFCPSTRet>0.00</vFCPSTRet><vProd>300.00</vProd><vFrete>0.00</vFrete><vSeg>0.00</vSeg><vDesc>0.00</vDesc><vII>0.00</vII><vIPI>0.00</vIPI><vIPIDevol>0.00</vIPIDevol><vPIS>0.00</vPIS><vCOFINS>0.00</vCOFINS><vOutro>0.00</vOutro><vNF>300.00</vNF><vTotTrib>0.00</vTotTrib></ICMSTot></total><transp><modFrete>0</modFrete><transporta><CNPJ>94855590000188</CNPJ><xNome>SALVADOR SACCO PORRES LTDA</xNome><xEnder>AV BENTO GONCALVES   CENTRO 96015-140</xEnder><UF>RS</UF></transporta><vol><qVol>1</qVol></vol></transp><pag><detPag><tPag>90</tPag><vPag>0.00</vPag></detPag></pag><infAdic><infCpl>Retorno de conserto, referente a nota fiscal no: 49, emitida no dia: 11/09/2020.</infCpl></infAdic><infRespTec><CNPJ>37878691000130</CNPJ><xContato>Diretoria de Tecnologia da Informacao</xContato><email>faleconosco@gruposkill.com.br</email><fone>1155747770</fone></infRespTec></infNFe><Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\"><SignedInfo><CanonicalizationMethod Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\" /><SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\" /><Reference URI=\"#NFe43201005041647000185550010000661291884344087\"><Transforms><Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\" /><Transform Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\" /></Transforms><DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\" /><DigestValue>xuDcPWkmV8iSewCMFAcbyRA9QmU=</DigestValue></Reference></SignedInfo><SignatureValue>kSv2i9Rkyw9Qk2LQQLNWe+4mC273LDqdQRpYa8IQ7vL0s0PGZGWEipw0PIcknlsx1CVIZ+2RSbkrT7sFOFfdoLtTxUmk2ya8epf8SRfeo8//RMKA6zLklByjg5z83SwG5XlHZTJoV6NlJcZ7qTbipg7zJWEE/t6+D97kEshWJWWswVfR1Z7BN6QfDoLHSE9VRwcG7sTat4mZxgEuB3X5+iSDRuR8ymSEXxdGowFfeADofyww0ZoW4M92fHbBwc7LW1T4NgOAsNSxuAO3AUXi8s3E2KzyQ9+Gu6CyavTNMTN/oFzQVXrlOg6fBUKhjr9Bb5hPuwSDURymDQdfWLIqVA==</SignatureValue><KeyInfo><X509Data><X509Certificate>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</X509Certificate></X509Data></KeyInfo></Signature></NFe><protNFe versao=\"4.00\" xmlns=\"http://www.portalfiscal.inf.br/nfe\"><infProt><tpAmb>1</tpAmb><verAplic>RS202010200653</verAplic><chNFe>43201005041647000185550010000661291884344087</chNFe><dhRecbto>2020-10-30T13:17:35-03:00</dhRecbto><nProt>143200198533209</nProt><digVal>xuDcPWkmV8iSewCMFAcbyRA9QmU=</digVal><cStat>100</cStat><xMotivo>Autorizado o uso da NF-e</xMotivo></infProt></protNFe></nfeProc>";
        TNfeProc nfeProc = (TNfeProc) TransformXmlUtil.unmarshal(TNfeProc.class, xml);
        List<TNFe.InfNFe.Det> det = nfeProc.getNFe().getInfNFe().getDet();
        det.forEach((detItem) -> {
            detItem.getImposto().getContent().forEach((imposto) -> {
                System.out.println(imposto.getDeclaredType().getSimpleName());                
            });
        });
    }
}
